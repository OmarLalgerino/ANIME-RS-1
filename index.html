<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مكتبة الأنمي الخاصة بي</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #1a1a1a; color: white; text-align: center; padding: 20px; }
        .container { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; padding: 20px; }
        .anime-card { background: #2d2d2d; border-radius: 15px; padding: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); transition: 0.3s; }
        .anime-card:hover { transform: translateY(-5px); }
        .anime-card img { width: 100%; height: 350px; border-radius: 10px; object-fit: cover; }
        .anime-card h3 { font-size: 18px; margin: 15px 0; height: 50px; overflow: hidden; }
        .btn { display: inline-block; padding: 10px 20px; background-color: #e91e63; color: white; text-decoration: none; border-radius: 5px; font-weight: bold; }
        .btn:hover { background-color: #c2185b; }
    </style>
</head>
<body>

    <h1>آخر حلقات الأنمي المضافة</h1>
    <div class="container" id="anime-list">جاري تحميل الأنميات...</div>

    <script>
        // ضع رابط الـ RAW الخاص بملفك هنا
        const GITHUB_RAW_URL = "https://raw.githubusercontent.com/OmarLalgerino/anime-RS-/main/data.json";

        async function fetchAnime() {
            try {
                const response = await fetch(GITHUB_RAW_URL);
                const data = await response.json();
                const container = document.getElementById('anime-list');
                container.innerHTML = ""; // مسح رسالة التحميل

                // تحويل البيانات إلى مصفوفة إذا كانت كائناً واحداً
                const animeArray = Array.isArray(data) ? data : [data];

                animeArray.forEach(item => {
                    // جلب الصورة: الأولوية لـ AniList ثم MAL ثم الصورة المؤقتة
                    const poster = item.info?.coverImage?.extraLarge || item.anime?.images?.jpg?.image_url || "https://via.placeholder.com/300x450?text=No+Image";
                    
                    // جلب العنوان
                    const title = item.info?.title?.english || item.info?.title?.romaji || item.title || "عنوان غير معروف";
                    
                    // جلب الرابط (جودة 1080p أو أي رابط متاح)
                    const downloadLink = item.links?.["1080p"] || item.links?.["480p"] || item.episode?.link;

                    const card = `
                        <div class="anime-card">
                            <img src="${poster}" alt="${title}">
                            <h3>${title}</h3>
                            <a href="${downloadLink}" class="btn" target="_blank">مشاهدة / تحميل</a>
                        </div>
                    `;
                    container.innerHTML += card;
                });
            } catch (error) {
                console.error("خطأ في جلب البيانات:", error);
                document.getElementById('anime-list').innerHTML = "حدث خطأ أثناء تحميل البيانات.";
            }
        }

        fetchAnime();
    </script>
</body>
</html>
